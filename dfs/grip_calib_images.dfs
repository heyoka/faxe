def topic = 'ttgw/grip_images/#'
def mqtt_host = 'devat-cw-mqtt.tgwdev.internal'
def topic_base = 'ttgw/grip_images/'

def image =
    |mqtt_subscribe()
    .host(mqtt_host)
    .port(1883)
    .topic(topic)

%|where()
%.lambda(lambda: "data.image_name" == 'calibration_image')

%|eval()
%.lambdas(lambda: str_concat( topic_base, "data.device", '/calibration_image/' , "data.location") )
%.as('topic')


|debug()

@condition_monitor_cameras_wrapper()

|debug()
