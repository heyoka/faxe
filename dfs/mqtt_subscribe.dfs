def mqtt =
    |mqtt_subscribe()
    .host('devat-cw-mqtt.tgwdev.internal')
    .port(1883)
    .topic('ttgw/grip/#')

    |where()
    .lambda(lambda: str_ends_with("topic", '/conveyor_message') == false)

    |where()
    .lambda(lambda: if(member("topic", ls_mem('topics_seen')), false, true))
    .ls_mem('topics_seen')
    .ls_mem_field('topic')
    .ls_mem_ttl(3)

    |debug()




